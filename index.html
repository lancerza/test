<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom HTML5 Video Player</title>
    <link rel="icon" href="data:;base64,=">
    <style>
        body { margin: 0; padding: 0; background: #121212; color: #e0e0e0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { width: 95%; max-width: 1200px; margin: 20px auto; }
        
        /* --- üìå START: CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ --- */
        #datetime-display {
            color: #ccc;
            font-size: 16px;
            text-align: right;
            margin-bottom: 15px;
            padding-right: 10px;
        }
        /* --- END: CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ --- */

        .player-wrapper { position: relative; width: 100%; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
        video { width: 100%; display: block; }
        .custom-controls { position: absolute; bottom: 0; left: 0; right: 0; padding: 10px; display: flex; align-items: center; gap: 15px; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%); opacity: 0; transition: opacity 0.3s ease; }
        .player-wrapper:hover .custom-controls { opacity: 1; }
        .control-btn { background: none; border: none; color: white; cursor: pointer; padding: 5px; font-size: 24px; }
        .control-btn:hover { color: #00aaff; }
        input[type="range"] { -webkit-appearance: none; appearance: none; background: transparent; cursor: pointer; }
        input[type="range"]::-webkit-slider-runnable-track { background: rgba(255, 255, 255, 0.3); height: 6px; border-radius: 3px; }
        input[type="range"]::-moz-range-track { background: rgba(255, 255, 255, 0.3); height: 6px; border-radius: 3px; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; margin-top: -5px; background-color: #00aaff; height: 16px; width: 16px; border-radius: 50%; }
        input[type="range"]::-moz-range-thumb { border: none; background-color: #00aaff; height: 16px; width: 16px; border-radius: 50%; }
        #progress-bar { flex-grow: 1; }
        #volume-slider { width: 100px; }
        .time-display { color: white; font-size: 14px; user-select: none; }
        .channel-info { display: none; align-items: center; justify-content: center; gap: 20px; margin-top: 20px; padding: 10px; background-color: #1e1e1e; border-radius: 12px; }
        .channel-info .logo { height: 50px; margin: 0; }
        .channel-name { font-size: 24px; font-weight: bold; color: #ffffff; margin: 0; }
        .channel-buttons { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 20px; margin-top: 20px; }
        .channel-tile { background-color: #2a2a2e; border-radius: 12px; padding: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; cursor: pointer; transition: all 0.2s ease-in-out; border: 2px solid transparent; min-height: 120px; position: relative; }
        .channel-tile:hover { transform: scale(1.05); background-color: #3c3c41; }
        .channel-tile.active { border-color: #00aaff; background-color: #005c99; transform: scale(1.08); box-shadow: 0 0 25px rgba(0, 170, 255, 0.6); }
        .channel-tile.active::before { content: '‚ñ∂ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô'; position: absolute; top: 8px; left: 8px; background-color: #00aaff; color: white; padding: 3px 8px; border-radius: 5px; font-size: 12px; font-weight: bold; z-index: 2; }
        .channel-tile img { width: 100%; max-height: 60px; object-fit: contain; margin-bottom: 10px; flex-grow: 0; }
        .channel-tile-name { font-size: 14px; color: #e0e0e0; text-align: center; font-weight: 500; }
        .channel-tile .play-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.6); color: white; font-size: 50px; display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.2s ease-in-out; border-radius: 10px; z-index: 1; }
        .channel-tile:hover .play-overlay { opacity: 1; }
        .channel-tile.active:hover .play-overlay { opacity: 0; }
    </style>
</head>
<body>
    <div class="container">
        <div id="datetime-display"></div>
        <div class="player-wrapper">
            <video id="video" autoplay muted></video>
            <div class="custom-controls">
                <button id="play-pause-btn" class="control-btn">‚ñ∂Ô∏è</button>
                <input type="range" id="progress-bar" value="0" step="1">
                <div id="time-display" class="time-display">00:00 / 00:00</div>
                <button id="mute-btn" class="control-btn">üîä</button>
                <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
                <button id="fullscreen-btn" class="control-btn">‚õ∂</button>
            </div>
        </div>
        <div id="channel-buttons-container" class="channel-buttons"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        // Custom Player Logic
        const video = document.getElementById('video');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const progressBar = document.getElementById('progress-bar');
        const timeDisplay = document.getElementById('time-display');
        const muteBtn = document.getElementById('mute-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const playerWrapper = document.querySelector('.player-wrapper');
        function togglePlay() { video.paused ? video.play() : video.pause(); }
        function updatePlayButton() { playPauseBtn.textContent = video.paused ? '‚ñ∂Ô∏è' : '‚è∏Ô∏è'; }
        function formatTime(time) { const minutes = Math.floor(time / 60); const seconds = Math.floor(time % 60); return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`; }
        function updateProgress() { progressBar.value = (video.currentTime / video.duration) * 100 || 0; timeDisplay.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration || 0)}`; }
        function setProgress() { video.currentTime = (progressBar.value / 100) * video.duration; }
        function toggleMute() { video.muted = !video.muted; }
        function updateMuteButton() { muteBtn.textContent = video.muted || video.volume === 0 ? 'üîá' : 'üîä'; }
        function setVolume() { video.volume = volumeSlider.value; }
        function toggleFullscreen() { if (!document.fullscreenElement) { playerWrapper.requestFullscreen().catch(err => alert(`Error: ${err.message}`)); } else { document.exitFullscreen(); } }
        playPauseBtn.addEventListener('click', togglePlay);
        video.addEventListener('play', updatePlayButton);
        video.addEventListener('pause', updatePlayButton);
        progressBar.addEventListener('input', setProgress);
        video.addEventListener('timeupdate', updateProgress);
        muteBtn.addEventListener('click', toggleMute);
        volumeSlider.addEventListener('input', setVolume);
        video.addEventListener('volumechange', () => { updateMuteButton(); volumeSlider.value = video.volume; });
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        
        // Channel loading logic
        let hls, channels = {}, currentChannelId = null;
        const channelButtonsContainer = document.getElementById('channel-buttons-container');
        function updateActiveButton() {
            const tiles = channelButtonsContainer.querySelectorAll('.channel-tile');
            tiles.forEach(tile => tile.classList.toggle('active', tile.dataset.channelId === currentChannelId));
        }
        function createChannelButtons() {
            channelButtonsContainer.innerHTML = '';
            for (const channelId in channels) {
                const channel = channels[channelId];
                const tile = document.createElement('a');
                tile.className = 'channel-tile';
                tile.dataset.channelId = channelId;
                tile.onclick = () => loadChannel(channelId);
                const logoImg = document.createElement('img');
                logoImg.src = channel.logo;
                logoImg.alt = channel.name;
                const nameSpan = document.createElement('span');
                nameSpan.className = 'channel-tile-name';
                nameSpan.innerText = channel.name;
                const playOverlay = document.createElement('div');
                playOverlay.className = 'play-overlay';
                playOverlay.innerHTML = '&#9658;';
                tile.appendChild(logoImg);
                tile.appendChild(nameSpan);
                tile.appendChild(playOverlay);
                channelButtonsContainer.appendChild(tile);
            }
        }
        function loadChannel(channelId) {
            if (!channels[channelId]) return;
            currentChannelId = channelId;
            const channel = channels[channelId];
            updateActiveButton();
            if (hls) {
                hls.loadSource(channel.url);
                video.play();
            }
        }
        async function init() {
            try {
                const response = await fetch('channels.json');
                channels = await response.json();
            } catch (e) {
                alert("Fatal Error: Could not load channel data.");
                return;
            }
            if (Hls.isSupported()) {
                hls = new Hls();
                hls.attachMedia(video);
            }
            createChannelButtons();
            const firstChannelId = Object.keys(channels)[0];
            if (firstChannelId) {
                loadChannel(firstChannelId);
            }
        }

        // --- üìå START: JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ---
        function updateTime() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            };
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡πÑ‡∏ó‡∏¢
            const thaiDate = now.toLocaleDateString('th-TH', options);
            const thaiTime = now.toLocaleTimeString('th-TH');
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô element ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ
            document.getElementById('datetime-display').textContent = `${thaiDate}, ${thaiTime}`;
        }
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        updateTime();
        // ‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏∏‡∏Å‡πÜ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(updateTime, 1000);
        // --- END: JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ ---

        document.addEventListener("DOMContentLoaded", init);
    </script>
</body>
</html>
